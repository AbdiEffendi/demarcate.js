/* demarcate.js version 1.1.2dev */
var Showdown,forEach,stdExtName,tag_dict;function modifyHtml(a){var b=$("<div/>").html(a).text(),c=new Showdown.converter,d=c.makeHtml(b);return d}function demarkdown(a,b){var d=a.get(0),e=d.nodeType,f=e==3?"_text":d.tagName.toLowerCase(),g="";if(a.hasClass("demarcate_temporary"))return g;if(!f in tag_dict)return g;if(!tag_dict[f].markdownable&&e!=3)return g;if(!b||tag_dict[f].force_prefix)g+=tag_dict[f].prefix;if(e==3){if($.trim(d.nodeValue)=="")return"";g+=$.trim(d.nodeValue)}g+=tag_dict[f].childprefix,$.each(a.contents(),function(a,c){g+=demarkdown($(c),b,"")});if(!b||tag_dict[f].force_prefix)g+=tag_dict[f].postfix;return tag_dict[f].post_newline&&(g+="\n"),f=="a"&&(g=" "+g+"("+a.attr("href")+") "),g}function generate_toolbar(){var a=$("<div />",{id:"demarcate_toolbar"});return a.append($("<a />",{id:"demarcate_h1","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_h2","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_h3","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_h4","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_h5","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_h6","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_p","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_code","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_pre","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_blockquote","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_ul","class":"demarcate_style",href:"#"})),a.append($("<p/>")),a.append($("<a />",{id:"demarcate_up","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_down","class":"demarcate_style",href:"#"})),a.append($("<a />",{id:"demarcate_help","class":"demarcate_style",href:"#"})),a.append($("<p/>")),a.append($("<a />",{id:"demarcate_cancel",href:"#"})),a.append($("<a />",{id:"demarcate_save",href:"#"})),a}function toolbar_set_active(){var a="";if(current_demarcate_element==null)return;a=current_demarcate_element.get(0).tagName.toLowerCase(),$(".demarcate_style").removeClass("active"),$("#demarcate_"+a).addClass("active")}function display_editor(a){var b,c,d,e;if(current_demarcate_editor!=null)return;a=$(a);b=a.get(0).tagName.toLowerCase();if(b in tag_dict){c=demarkdown(a,!0,""),d=$("<textarea />",{id:"demarcate"}).css("font",a.css("font")).css("outline","none").css("border",a.css("border")).css("margin",a.css("margin")),e=generate_toolbar();a.after(e).slideDown(),a.after(d).slideDown(),a.addClass("demarcate_hide"),current_demarcate_element=a,current_demarcate_editor=d,toolbar_set_active(),typeof a.autosize!=undefined&&d.autosize({append:"\n"}),d.focus().val($.trim(c)),$(window).resize()}}function hide_editor(a){a.preventDefault(),$("div#demarcate_toolbar").remove(),current_demarcate_editor.remove(),current_demarcate_editor=null,current_demarcate_element.html()===""&&current_demarcate_element.get(0).tagName!="HR"?current_demarcate_element.remove():current_demarcate_element.removeClass("demarcate_hide"),current_demarcate_element=null,$(".demarcate_temporary").remove()}function demarcate_click_elsewhere_save(a){var b;if(current_demarcate_editor==null)return;b=$("#demarcate_toolbar");!current_demarcate_editor.is(a.target)&&!b.is(a.target)&&b.has(a.target).length===0&&$("#demarcate_save").click()}function replace_tag(a){var b=$("<"+a+"/>");current_demarcate_element.after(b),current_demarcate_element.remove(),current_demarcate_element=b,$("a#demarcate_cancel").fadeOut("fast",function(){this.remove()}),current_demarcate_editor.css("font",current_demarcate_element.css("font")).css("border",current_demarcate_element.css("border")).css("margin",current_demarcate_element.css("margin")),toolbar_set_active(),current_demarcate_editor.focus()}function save_and_new_editor_area(){var a=current_demarcate_element.get(0).tagName.toLowerCase(),b=$("<"+a+"/>");b.insertAfter(current_demarcate_element),$("#demarcate_save").click(),b.addClass("demarcate_temporary"),b.click()}function enable_demarcate_toolbar_handlers(){$(document).on("keydown","#demarcate",function(a){var b;if(a.keyCode==13)a.preventDefault(),a.shiftKey?$("#demarcate_save").click():a.ctrlKey?save_and_new_editor_area():tag_dict[current_demarcate_element.get(0).tagName.toLowerCase()].allow_newline?current_demarcate_editor.insertAtCaret("\n"):save_and_new_editor_area();else if(a.keyCode==32){if(a.ctrlKey){a.preventDefault();b=$("div#demarcate_toolbar a.active").next().filter(".demarcate_style");b.length!=0?b.click():$("div#demarcate_toolbar a.demarcate_style").first().click()}}else a.keyCode==27?(a.preventDefault(),$("#demarcate_cancel").click()):a.keyCode==9&&(a.preventDefault(),current_demarcate_editor.insertAtCaret("    "))}),$(document).bind("mousedown",demarcate_click_elsewhere_save),$(document).on("click","#demarcate_cancel",function(a){hide_editor(a),$(document).trigger("demarcate_editor_closed",[current_demarcate_element])}),$(document).on("click","#demarcate_save",function(a){var d,b=current_demarcate_element.get(0).tagName.toLowerCase(),c=current_demarcate_editor.val();c!=""&&b!="hr"&&(c=tag_dict[b].prefix+tag_dict[b].childprefix+c+tag_dict[b].postfix);d=$(modifyHtml(c));d.insertBefore(current_demarcate_element),current_demarcate_element.remove(),current_demarcate_element=d,hide_editor(a),$(document).trigger("demarcate_editor_closed",[current_demarcate_element])}),$(document).on("mouseover",".demarcate_style",function(a){var b=$(a.target).css("backgroundPosition").split(" ");$(a.target).css("backgroundPosition",b[0]+" "+(parseInt(b[1])-72)+"px")}),$(document).on("mouseout",".demarcate_style",function(a){var b=$(a.target).css("backgroundPosition").split(" ");$(a.target).css("backgroundPosition",b[0]+" "+(parseInt(b[1])+72)+"px")}),$(document).on("click",".demarcate_style",function(a){var b,c,d,e;a.preventDefault();b=$(this).attr("id").replace("demarcate_","");if(b in tag_dict){c=current_demarcate_element.get(0).tagName.toLowerCase(),d=current_demarcate_element.parent().get(0).tagName.toLowerCase();if(c=="li"&&b!="ul")par=current_demarcate_element.parent(),current_demarcate_element.detach().insertAfter(par),replace_tag(b);else if(c!="li"&&b=="ul"){e=$("<"+b+"/>");e.insertBefore(current_demarcate_element),current_demarcate_element.appendTo(e),replace_tag("li")}else replace_tag(b)}else b=="help"&&alert("SHIFT+ENTER - save your changes\nESCAPE - cancel your changes\nCTRL+ENTER - save your changes, insert a new section\nENTER - save your changes (or add new line in a code block)")}),$(document).on("click","#demarcate_down",function(a){var b;a.preventDefault();b=$("#demarcate_toolbar").next(".demarcate_editable");b.length>0&&b.insertBefore(current_demarcate_element),current_demarcate_editor.focus()}),$(document).on("click","#demarcate_up",function(a){var b;a.preventDefault();b=current_demarcate_element.prev(".demarcate_editable");b.length>0&&b.insertAfter($("#demarcate_toolbar")),current_demarcate_editor.focus()})}Showdown={extensions:{}},forEach=Showdown.forEach=function(a,b){if("function"==typeof a.forEach)a.forEach(b);else{var c,d=a.length;for(c=0;d>c;c++)b(a[c],c,a)}},stdExtName=function(a){return a.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(a){var b,c,d,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,e=0,f=[],g=[];if("undefind"!=typeof module&&"undefined"!=typeof exports&&"undefind"!=typeof require){h=require("fs");if(h){i=h.readdirSync((__dirname||".")+"/extensions").filter(function(a){return~a.indexOf(".js")}).map(function(a){return a.replace(/\.js$/,"")});Showdown.forEach(i,function(a){var b=stdExtName(a);Showdown.extensions[b]=require("./extensions/"+a)})}}if(this.makeHtml=function(a){return b={},c={},d=[],a=a.replace(/~/g,"~T"),a=a.replace(/\$/g,"~D"),a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n"),a="\n\n"+a+"\n\n",a=M(a),a=a.replace(/^[ \t]+$/gm,""),Showdown.forEach(f,function(b){a=l(b,a)}),a=z(a),a=n(a),a=m(a),a=p(a),a=K(a),a=a.replace(/~D/g,"$$"),a=a.replace(/~T/g,"~"),Showdown.forEach(g,function(b){a=l(b,a)}),a},a&&a.extensions){j=this;Showdown.forEach(a.extensions,function(a){if("string"==typeof a&&(a=Showdown.extensions[stdExtName(a)]),"function"!=typeof a)throw"Extension '"+a+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(a(j),function(a){a.type?"language"===a.type||"lang"===a.type?f.push(a):("output"===a.type||"html"===a.type)&&g.push(a):g.push(a)})})}l=function(a,b){if(a.regex){var c=RegExp(a.regex,"g");return b.replace(c,a.replace)}return a.filter?a.filter(b):void 0},m=function(a){return a+="~0",a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(a,d,e,f,g){return d=d.toLowerCase(),b[d]=G(e),f?f+g:(g&&(c[d]=g.replace(/"/g,"&quot;")),"")}),a=a.replace(/~0/,"")},n=function(a){return a=a.replace(/\n/g,"\n\n"),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,o),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,o),a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,o),a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,o),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,o),a=a.replace(/\n\n/g,"\n")},o=function(a,b){var c=b;return c=c.replace(/\n\n/g,"\n"),c=c.replace(/^\n/,""),c=c.replace(/\n+$/g,""),c="\n\n~K"+(d.push(c)-1)+"K\n\n"},p=function(a){a=w(a);var b=A("<hr />");return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=x(a),a=y(a),a=E(a),a=n(a),a=F(a)},q=function(a){return a=B(a),a=r(a),a=H(a),a=u(a),a=s(a),a=I(a),a=G(a),a=D(a),a=a.replace(/  +\n/g," <br />\n")},r=function(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=N(b,"\\`*_")})},s=function(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,t),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,t),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,t)},t=function(a,d,e,f,g,h,i,j){void 0==j&&(j="");var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(""==n)if(""==m&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m,void 0!=b[m])n=b[m],void 0!=c[m]&&(o=c[m]);else if(k.search(/\(\s*\)$/m)>-1)n="";else return k;n=N(n,"*_");var p='<a href="'+n+'"';return""!=o&&(o=o.replace(/"/g,"&quot;"),o=N(o,"*_"),p+=' title="'+o+'"'),p+=">"+l+"</a>"},u=function(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,v),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,v)},v=function(a,d,e,f,g,h,i,j){var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(o||(o=""),""==n){if(""==m&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m,void 0==b[m])return k;n=b[m],void 0!=c[m]&&(o=c[m])}l=l.replace(/"/g,"&quot;"),n=N(n,"*_");var p='<img src="'+n+'" alt="'+l+'"';return o=o.replace(/"/g,"&quot;"),o=N(o,"*_"),p+=' title="'+o+'"',p+=" />"},w=function(a){function b(a){return a.replace(/[^\w]/g,"").toLowerCase()}return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,c){return A('<h1 id="'+b(c)+'">'+q(c)+"</h1>")}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return A('<h2 id="'+b(c)+'">'+q(c)+"</h2>")}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){var e=c.length;return A("<h"+e+' id="'+b(d)+'">'+q(d)+"</h"+e+">")})},x=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return e?a=a.replace(b,function(a,b,c){var d=b,e=c.search(/[*+-]/g)>-1?"ul":"ol";d=d.replace(/\n{2,}/g,"\n\n\n");var f=k(d);return f=f.replace(/\s+$/,""),f="<"+e+">"+f+"</"+e+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",f=f.replace(/\n{2,}/g,"\n\n\n"),h=k(f);return h=e+"<"+g+">\n"+h+"</"+g+">\n"})),a=a.replace(/~0/,"")};k=function(a){return e++,a=a.replace(/\n{2,}$/,"\n"),a+="~0",a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){var f=e,g=b;return g||f.search(/\n{2,}/)>-1?f=p(L(f)):(f=x(L(f)),f=f.replace(/\n$/,""),f=q(f)),"<li>"+f+"</li>\n"}),a=a.replace(/~0/g,""),e--,a};y=function(a){return a+="~0",a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=C(L(d)),d=M(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>",A(d)+e}),a=a.replace(/~0/,"")},z=function(a){return a+="~0",a=a.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(a,b,c){var d=b,e=c;return e=C(e),e=M(e),e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,""),e="<pre><code"+(d?' class="'+d+'"':"")+">"+e+"\n</code></pre>",A(e)}),a=a.replace(/~0/,"")},A=function(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(d.push(a)-1)+"K\n\n"},B=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d){var e=d;return e=e.replace(/^([ \t]*)/g,""),e=e.replace(/[ \t]*$/g,""),e=C(e),b+"<code>"+e+"</code>"})},C=function(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=N(a,"*_{}[]\\",!1)},D=function(a){return a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},E=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=p(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"~0"),c=c.replace(/~0/g,"")}),A("<blockquote>\n"+c+"\n</blockquote>")})},F=function(a){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var b=a.split(/\n{2,}/g),c=[],e=b.length,f=0;e>f;f++){var g=b[f];g.search(/~K(\d+)K/g)>=0?c.push(g):g.search(/\S/)>=0&&(g=q(g),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",c.push(g))}e=c.length;for(var f=0;e>f;f++)for(;c[f].search(/~K(\d+)K/)>=0;){var h=d[RegExp.$1];h=h.replace(/\$/g,"$$$$"),c[f]=c[f].replace(/~K\d+K/,h)}return c.join("\n\n")},G=function(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},H=function(a){return a=a.replace(/\\(\\)/g,O),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,O)},I=function(a){return a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return J(K(b))})},J=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){return"&#x"+a.charCodeAt(0).toString(16)+";"},function(a){return a}];return a="mailto:"+a,a=a.replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=c>.9?b[2](a):c>.45?b[1](a):b[0](a)}return a}),a='<a href="'+a+'">'+a+"</a>",a=a.replace(/">.+:/g,'">')},K=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})},L=function(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"")},M=function(a){return a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"~A~B"),a=a.replace(/~B(.+?)~A/g,function(a,b){for(var c=b,d=4-c.length%4,e=0;d>e;e++)c+=" ";return c}),a=a.replace(/~A/g,"    "),a=a.replace(/~B/g,"")},N=function(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=RegExp(d,"g");return a=a.replace(e,O)},O=function(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}},"undefined"!=typeof module&&(module.exports=Showdown),"function"==typeof define&&define.amd&&define("showdown",function(){return Showdown});tag_dict={div:{editable:!1,markdownable:!0,prefix:"",postfix:"",post_newline:!1,childprefix:"",allow_newline:!1,force_prefix:!1},span:{editable:!1,markdownable:!0,prefix:"",postfix:"",post_newline:!1,childprefix:"",allow_newline:!1,force_prefix:!1},h1:{editable:!0,markdownable:!0,prefix:"# ",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!1},h2:{editable:!0,markdownable:!0,prefix:"## ",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!1},h3:{editable:!0,markdownable:!0,prefix:"### ",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!1},h4:{editable:!0,markdownable:!0,prefix:"#### ",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!1},h5:{editable:!0,markdownable:!0,prefix:"##### ",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!1},h6:{editable:!0,markdownable:!0,prefix:"###### ",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!1},li:{editable:!0,markdownable:!0,prefix:"- ",postfix:"\n",post_newline:!1,childprefix:"",allow_newline:!1,force_prefix:!0},ul:{editable:!0,markdownable:!0,prefix:"",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!0,force_prefix:!1},ol:{editable:!0,markdownable:!0,prefix:"",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!0,force_prefix:!1},blockquote:{editable:!0,markdownable:!0,prefix:">",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!1},pre:{editable:!0,markdownable:!0,prefix:"    ",postfix:"\n",post_newline:!0,childprefix:"    ",allow_newline:!0,force_prefix:!1},code:{editable:!0,markdownable:!0,prefix:" `",postfix:"` ",post_newline:!1,childprefix:"",allow_newline:!1,force_prefix:!0},a:{editable:!1,markdownable:!0,prefix:" [",postfix:"]",post_newline:!1,childprefix:"",allow_newline:!1,force_prefix:!0},hr:{editable:!0,markdownable:!0,prefix:"------",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!0},em:{editable:!1,markdownable:!0,prefix:" *",postfix:"* ",post_newline:!1,childprefix:"",allow_newline:!1,force_prefix:!0},strong:{editable:!1,markdownable:!0,prefix:" **",postfix:"** ",post_newline:!1,childprefix:"",allow_newline:!1,force_prefix:!0},p:{editable:!0,markdownable:!0,prefix:"",postfix:"\n",post_newline:!0,childprefix:"",allow_newline:!1,force_prefix:!1},_text:{editable:!1,markdownable:!0,prefix:"",postfix:"",post_newline:!1,childprefix:"",allow_newline:!1,force_prefix:!1}};(function(a){a.fn.demarcate=function(){return result=demarkdown(this,!1,""),a(document).trigger("demarcation_complete",[result]),result}})(jQuery),function(a){a.fn.enable_demarcate=function(){var b;window.demarcate_dom_root=a(this),window.current_demarcate_editor=null,window.current_demarcate_element=null,a(this).addClass("demarcate_sortable");for(b in tag_dict)tag_dict[b].editable&&(live_selector="#"+this.attr("id")+" > "+b,a(document).on("click",live_selector,function(b){if(a("#demarcate_toolbar").has(b.target).length>0||a("#demarcate_toolbar").is(b.target)||a(this).attr("id")==="demarcate")return;display_editor(this)}),a(live_selector).addClass("demarcate_editable"),a(document).on("DOMNodeInserted",live_selector,function(b){a(b.target).addClass("demarcate_editable")}));enable_demarcate_toolbar_handlers(),(demarcate_dom_root.is(":empty")||a.trim(demarcate_dom_root.html())=="")&&demarcate_dom_root.append(a("<p />",{"class":"demarcate_temporary",text:"Click me to start editing"}))}}(jQuery),function(a){a.fn.insertAtCaret=function(a){var b=this.val().replace(/\r\n/g,"\n"),c=this.get(0).selectionStart,d=this.get(0).selectionEnd,e=b.substring(0,c)+a+b.substring(d);this.val(e.replace(/\n/g,"\r\n"))}}(jQuery)